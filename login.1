


LOGIN(1)       Human68k ITA TOOLBOX User's Manual        LOGIN(1)



名称
     login - Human68k へのログイン

形式
     login [ -p ] [ name [ env-var ... ] ]

解説
     login コマンドを使う目的は 2つあります．その 1つは，Human68k
     を利用する環境をユーザ毎に，あるいは作業内容毎に振り分けるこ
     とです．パスワード・ファイルによって，ユーザ毎に環境を振り分
     け，また，非ユーザの利用を排除します．login コマンドは，ユー
     ザがシステムの使用を開始する際に使われる他，他のユーザへ一時
     的に変更する際にも使うことができます．また，特定の処理をユー
     ザの環境に依存せずに確実に実行するためにも使われます．

     login コマンドを使う目的のもう 1つは，fish(1) をログイン・シェ
     ルとして起動することです．fish(1) は login(1) から起動される
     と自動的にログイン・シェルとなります．システム・ファイル
     CONFIG.SYS(5) に SHELL=A:\bin\fish.x のように記述したり，
     Human68k のプロンプト # に対して A:\bin\fish のように入力し
     て Human68k から直接起動することによっても fish(1) をログイ
     ン・シェルとして動作させることができますが，この場合，
     fish(1) を終了すると Human68k のプロンプト # に戻ってしまう
     ため，不便です．login コマンドをシステムの根元に置けば，この
     不便さは解消されます．これは一般的には，CONFIG.SYS に

          SHELL=A:/bin/login.x

     のように記述しておくことで実現できます．（本来は getty.x が
     この役割を担うべきですが，getty.x はまだ提供されていません）

     login コマンドを引数なしで起動すると，ユーザのログイン名を尋
     ねてきます．入力文字列の前後の空白は削除します．引数 name を
     指定すると，name をログイン名として受理します．

     次に，必要な場合にはパスワードを尋ねてきます．パスワードの入
     力中は，可能であればエコー・バックがオフになるので，パスワー
     ドは作業中の表示出力には表われません．パスワードの入力中は，
     改行以外のすべての入力キャラクタが文字として入力されますので，
     ^C によって中断することはできません．

     ログインに成功すると，login はファイル $SYSROOT/etc/motd の
     内容を表示します．ただしログイン・ユーザのホーム・ディレクト
     リにファイル %hushlogin がある場合には，この表示は行いません．
     （ここで，$SYSROOT は環境変数 SYSROOT の値を意味します）

     login はパスワードファイル内の指定にしたがってログイン・ユー
     ザのホーム・ディレクトリをカレント・ディレクトリとし，パスワー
     ドファイル内の指定にしたがってシェル・プログラムを起動します．

     ユーザの（ログイン・シェルに渡される）環境変数は，以下のよう
     に初期設定されています．

          LOGNAME=ユーザのログイン名（ユーザ名）
          USER=ユーザ名
          HOME=ユーザのログイン（ホーム）・ディレクトリ
          SHELL=シェル・プログラムのパス名
          SYSROOT=システムのルート・ディレクトリ

     SYSROOT は，login 自身の環境そのものです．login が環境変数
     SYSROOT を持っていなければユーザの環境でも未定義となります．

     他の環境変数は破棄されますが，‘-p’オプションを指定すれば，
     他の環境変数も保存されます．

     引数 env-var ... はユーザの環境に追加されます．引数は bar ま
     たは foo=bar の形式をとることができます．‘=’が含まれていな
     い引数 bar は次のようにユーザの環境に定義されます．

          Ln=bar

     ここで，n は 0 から始まる10進整数で，新しい変数をセットする
     度にインクリメントします．

     ‘=’を含む引数 foo=bar は，そのままユーザの環境にセットされ
     ます．

     ユーザのシェルに渡される環境領域の大きさはすべての変数がちょ
     うど収まる大きさに切り詰められています．

     ログイン・シェルが終了すると再び login プログラムが動作し，
     ユーザのログイン名を尋ねることから始まる一連のセッションが繰
     り返されます．

     シェルから login コマンドを起動した場合には，ユーザのログイ
     ン名を尋ねられているときに ^C を入力して login コマンドを終
     了することができます．login に親プロセスがない場合
     （CONFIG.SYS の SHELL= によって login を起動した場合など）に
     は login コマンドは，^C やエラーによる中断を無視し，決して終
     了しません．これは getty.x が提供されるまでの暫定的な処置で
     す．getty.x が提供されるときには login.x はいつでも ^C で終
     了するように修正されることになることでしょう．

     通常のファイル $SYSROOT/etc/nologin が存在していれば，login
     はその内容を表示し，何もせずに終了します．

環境変数
     SYSROOT        システムのルート・ディレクトリ

関連ファイル
     $SYSROOT/etc/passwd        パスワードファイル
     $SYSROOT/etc/nologin       ログインの禁止
     $SYSROOT/etc/motd          ログイン・メッセージ
     $HOME/%hushlogin           ログイン・メッセージの抑止

関連事項
     fish(1), motd(5), passwd(5)

制作・著作
     Copyright(C)1991 by 板垣 史彦 (Itagaki Fumihiko)

バグ
     パスワードはまだ暗号化されていません．近い将来新しい login.x
     が passwd.x コマンドと共に提供され，そのときにはパスワードは
     暗号化されることでしょう．その暗号はごく簡単なものであるため
     赤子の手をひねるように，いとも簡単に見破られることでしょうが，
     見破ってはいけません．:-)

     陳腐化パスワードの判断は行わず，passwd.x も起動しません．

     現在のところ，pwck.x や getty.x, init.x はまだありません．こ
     れらもまた近い将来提供されるでしょう．



0.3                 Last change: 27 Aug 1991     Itagaki Fumihiko



